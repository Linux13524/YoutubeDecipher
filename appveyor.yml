build: Script

environment:
    PYTHON_DIR: "C:\\Python38-x64\\"
    PYTHON_EXE: "C:\\Python38-x64\\python.exe"
    PYTHON_PIP: "C:\\Python38-x64\\Scripts\\pip.exe"

    CONAN_REFERENCE: "youtube_decipher/1.0.2"
    CONAN_USERNAME: "linux13524"
    CONAN_CHANNEL: "testing"
    CONAN_CPPSTDS: "17"
    CONAN_STABLE_BRANCH_PATTERN: "release/*"
    CONAN_UPLOAD_DEPENDENCIES: "all"
    CONAN_BUILD_POLICY: "outdated"
    CONAN_REVISIONS_ENABLED: 1

    matrix:

        - APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2017
          CONAN_VISUAL_VERSIONS: 15
          CONAN_BUILD_TYPES: Debug
          CONAN_VISUAL_RUNTIMES: MDd
          CONAN_ARCHS: x86_64
        - APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2017
          CONAN_VISUAL_VERSIONS: 15
          CONAN_BUILD_TYPES: Release
          CONAN_VISUAL_RUNTIMES: MD
          CONAN_ARCHS: x86_64


install:
  - set PATH=%PATH%;%PYTHON_DIR%/Scripts/
  - "%PYTHON_PIP% install conan --upgrade"
  - "%PYTHON_PIP% install conan_package_tools"
  - "%PYTHON_PIP% install spdx_lookup"
  - dir "%PYTHON_DIR%\\Scripts\\"
  - conan user # It creates the conan data directory
  - conan config install http://github.com/conan-io/hooks.git -sf hooks -tf hooks # Install and enable the hooks
  - conan config set hooks.attribute_checker
  - conan config set hooks.github_updater
  - conan config set hooks.spdx_checker

build_script:
  - "%PYTHON_EXE% build.py"
